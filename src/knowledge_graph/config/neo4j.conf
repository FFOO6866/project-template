# Neo4j Configuration for Horme Knowledge Graph
# Optimized for product relationship management and semantic search

#*****************************************************************
# Network connector configuration
#*****************************************************************

# HTTP Connector
server.http.enabled=true
server.http.listen_address=0.0.0.0:7474

# HTTPS Connector
server.https.enabled=false
server.https.listen_address=0.0.0.0:7473

# Bolt connector
server.bolt.enabled=true
server.bolt.listen_address=0.0.0.0:7687

#*****************************************************************
# Memory Settings - Optimized for Knowledge Graph Operations
#*****************************************************************

# Java Heap Size
server.memory.heap.initial_size=512m
server.memory.heap.max_size=2G

# Page Cache - Critical for graph traversal performance
server.memory.pagecache.size=1G

# Transaction state memory
server.memory.transaction.global_max_size=100m
server.memory.transaction.max_size=10m

#*****************************************************************
# Database Configuration
#*****************************************************************

# Default database
server.default_database=horme_knowledge

# Enable multi-database support
server.databases.default_to_read_only=false

#*****************************************************************
# Query Performance Tuning
#*****************************************************************

# Query cache settings
server.db.query_cache_size=25
server.db.query_cache_ttl=70s

# Query execution timeout (30 seconds)
server.db.query_timeout=30s

# Cypher runtime
server.cypher.default_runtime=pipelined

# Query parallelism
server.cypher.parallel_runtime_support=all

#*****************************************************************
# Security Configuration
#*****************************************************************

# Authentication and authorization
server.security.auth_enabled=true
server.security.procedures.unrestricted=apoc.*,gds.*

# LDAP/Active Directory (disabled for development)
server.security.auth_providers=native

#*****************************************************************
# APOC and GDS Plugin Configuration
#*****************************************************************

# Enable APOC procedures for data import/export
server.config.strict_validation.enabled=false
server.security.procedures.allowlist=apoc.*,gds.*

# APOC import settings
apoc.import.file.enabled=true
apoc.export.file.enabled=true
apoc.import.file.use_neo4j_config=true

#*****************************************************************
# Performance and Indexing
#*****************************************************************

# Index configuration for product relationships
server.db.index_sampling.background_enabled=true
server.db.index_sampling.sample_size_limit=1000000

# Full-text index provider
server.db.index.fulltext.default_provider=lucene

#*****************************************************************
# Logging Configuration
#*****************************************************************

# Log levels
server.logs.debug.level=INFO
server.logs.query.enabled=false
server.logs.query.threshold=0s

# Security event logging
server.logs.security.level=INFO

#*****************************************************************
# Product Knowledge Graph Specific Settings
#*****************************************************************

# Custom property for relationship confidence scoring
# These will be used in our Python application layer

# Metrics collection for monitoring
server.metrics.enabled=true
server.metrics.graphite.enabled=false
server.metrics.prometheus.enabled=true
server.metrics.prometheus.endpoint=0.0.0.0:2004

#*****************************************************************
# Backup and Maintenance
#*****************************************************************

# Enable online backup
server.backup.enabled=false

# Transaction log settings
server.tx_log.rotation.retention_policy=7 days

#*****************************************************************
# Network and Connection Settings
#*****************************************************************

# Connection pooling
server.bolt.connection_keep_alive=PT30M
server.bolt.connection_keep_alive_for_requests=ALL

# Thread pool settings for concurrent requests
server.bolt.thread_pool_min_size=5
server.bolt.thread_pool_max_size=400

#*****************************************************************
# Development vs Production Settings
#*****************************************************************

# For development - allows easier debugging
server.unmanaged_extension_classes=
server.allow_upgrade=true

# For production, these should be more restrictive:
# server.security.procedures.allowlist=gds.*
# server.logs.query.enabled=true
# server.backup.enabled=true